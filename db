-- This script was generated by a beta version of the ERD tool in pgAdmin 4.
-- Please log an issue at https://redmine.postgresql.org/projects/pgadmin4/issues/new if you find any bugs, including reproduction steps.
BEGIN;


CREATE TABLE IF NOT EXISTS public.auth_user
(
    id integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    password character varying(128) COLLATE pg_catalog."default" NOT NULL,
    last_login timestamp with time zone,
    is_superuser boolean NOT NULL,
    username character varying(150) COLLATE pg_catalog."default" NOT NULL,
    first_name character varying(150) COLLATE pg_catalog."default" NOT NULL,
    last_name character varying(150) COLLATE pg_catalog."default" NOT NULL,
    email character varying(254) COLLATE pg_catalog."default" NOT NULL,
    is_staff boolean NOT NULL,
    is_active boolean NOT NULL,
    date_joined timestamp with time zone NOT NULL,
    CONSTRAINT auth_user_pkey PRIMARY KEY (id)
);


CREATE TABLE IF NOT EXISTS public.health_appointment
(
    id integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    a_date date,
    from_time character varying(100) COLLATE pg_catalog."default",
    to_time character varying(100) COLLATE pg_catalog."default",
    status character varying(100) COLLATE pg_catalog."default",
    doctor_id integer,
    medical_id integer,
    patient_id integer,
    CONSTRAINT health_appointment_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.health_doctor
(
    id integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    status character varying(100) COLLATE pg_catalog."default",
    mobile_no character varying(10) COLLATE pg_catalog."default",
    addr character varying(100) COLLATE pg_catalog."default",
    experience character varying(100) COLLATE pg_catalog."default",
    specialist character varying(100) COLLATE pg_catalog."default",
    service character varying(100) COLLATE pg_catalog."default",
    clinic character varying(100) COLLATE pg_catalog."default",
    cl_address character varying(100) COLLATE pg_catalog."default",
    daystiming character varying(100) COLLATE pg_catalog."default",
    timing character varying(100) COLLATE pg_catalog."default",
    price character varying(100) COLLATE pg_catalog."default",
    date_of_birth date,
    gender character varying(100) COLLATE pg_catalog."default",
    biography text COLLATE pg_catalog."default",
    image character varying(100) COLLATE pg_catalog."default",
    user_id integer,
    CONSTRAINT health_doctor_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.health_doctors_invoice
(
    id integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    medicine character varying(100) COLLATE pg_catalog."default",
    prescription character varying(100) COLLATE pg_catalog."default",
    price character varying(100) COLLATE pg_catalog."default",
    appointment_id integer,
    CONSTRAINT health_doctors_invoice_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.health_medical
(
    id integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    status character varying(100) COLLATE pg_catalog."default",
    days_time character varying(100) COLLATE pg_catalog."default",
    timing character varying(100) COLLATE pg_catalog."default",
    name character varying(100) COLLATE pg_catalog."default",
    foundation_date character varying(100) COLLATE pg_catalog."default",
    mobile_no character varying(100) COLLATE pg_catalog."default",
    addr character varying(100) COLLATE pg_catalog."default",
    experience character varying(100) COLLATE pg_catalog."default",
    image character varying(100) COLLATE pg_catalog."default",
    user_id integer,
    CONSTRAINT health_medical_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.health_medical_record
(
    id integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    date date,
    discription character varying(100) COLLATE pg_catalog."default",
    appoint_id integer,
    CONSTRAINT health_medical_record_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.health_patient
(
    id integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    blood_group character varying(10) COLLATE pg_catalog."default",
    cvv character varying(10) COLLATE pg_catalog."default",
    mobile_no character varying(10) COLLATE pg_catalog."default",
    addr character varying(100) COLLATE pg_catalog."default",
    card_status character varying(100) COLLATE pg_catalog."default",
    date_of_birth date,
    image character varying(100) COLLATE pg_catalog."default",
    user_id integer,
    CONSTRAINT health_patient_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.health_prescription
(
    id integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    name character varying(100) COLLATE pg_catalog."default",
    quantity character varying(100) COLLATE pg_catalog."default",
    days character varying(100) COLLATE pg_catalog."default",
    "time" character varying(100) COLLATE pg_catalog."default",
    price character varying(100) COLLATE pg_catalog."default",
    appoint_id integer,
    CONSTRAINT health_prescription_pkey PRIMARY KEY (id)
);


ALTER TABLE IF EXISTS public.health_appointment
    ADD CONSTRAINT health_appointment_doctor_id_632dbf88_fk_health_doctor_id FOREIGN KEY (doctor_id)
    REFERENCES public.health_doctor (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX IF NOT EXISTS health_appointment_doctor_id_632dbf88
    ON public.health_appointment(doctor_id);


ALTER TABLE IF EXISTS public.health_appointment
    ADD CONSTRAINT health_appointment_medical_id_b83fa2e8_fk_health_medical_id FOREIGN KEY (medical_id)
    REFERENCES public.health_medical (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX IF NOT EXISTS health_appointment_medical_id_b83fa2e8
    ON public.health_appointment(medical_id);


ALTER TABLE IF EXISTS public.health_appointment
    ADD CONSTRAINT health_appointment_patient_id_1d53110b_fk_health_patient_id FOREIGN KEY (patient_id)
    REFERENCES public.health_patient (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX IF NOT EXISTS health_appointment_patient_id_1d53110b
    ON public.health_appointment(patient_id);


ALTER TABLE IF EXISTS public.health_doctor
    ADD CONSTRAINT health_doctor_user_id_8e31e450_fk_auth_user_id FOREIGN KEY (user_id)
    REFERENCES public.auth_user (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX IF NOT EXISTS health_doctor_user_id_8e31e450
    ON public.health_doctor(user_id);


ALTER TABLE IF EXISTS public.health_doctors_invoice
    ADD CONSTRAINT health_doctors_invoi_appointment_id_c148dad5_fk_health_ap FOREIGN KEY (appointment_id)
    REFERENCES public.health_appointment (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX IF NOT EXISTS health_doctors_invoice_appointment_id_c148dad5
    ON public.health_doctors_invoice(appointment_id);


ALTER TABLE IF EXISTS public.health_medical
    ADD CONSTRAINT health_medical_user_id_0a51dc77_fk_auth_user_id FOREIGN KEY (user_id)
    REFERENCES public.auth_user (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX IF NOT EXISTS health_medical_user_id_0a51dc77
    ON public.health_medical(user_id);


ALTER TABLE IF EXISTS public.health_medical_record
    ADD CONSTRAINT health_medical_recor_appoint_id_c01af3ab_fk_health_ap FOREIGN KEY (appoint_id)
    REFERENCES public.health_appointment (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX IF NOT EXISTS health_medical_record_appoint_id_c01af3ab
    ON public.health_medical_record(appoint_id);


ALTER TABLE IF EXISTS public.health_patient
    ADD CONSTRAINT health_patient_user_id_be6c6906_fk_auth_user_id FOREIGN KEY (user_id)
    REFERENCES public.auth_user (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX IF NOT EXISTS health_patient_user_id_be6c6906
    ON public.health_patient(user_id);


ALTER TABLE IF EXISTS public.health_prescription
    ADD CONSTRAINT health_prescription_appoint_id_0d3d2d2b_fk_health_ap FOREIGN KEY (appoint_id)
    REFERENCES public.health_appointment (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX IF NOT EXISTS health_prescription_appoint_id_0d3d2d2b
    ON public.health_prescription(appoint_id);

END;